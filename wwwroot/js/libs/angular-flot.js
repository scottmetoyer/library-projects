angular.module("angular-flot",[]).directive("flot",["$timeout",function(t){return{restrict:"EA",template:"<div></div>",scope:{dataset:"=",options:"=",callback:"=",onPlotClick:"&",onPlotHover:"&",onPlotSelected:"&"},link:function(o,e,n){var i=null,c=n.width||"100%",l=n.height||"100%";if(((o.options||{}).legend||{}).container instanceof jQuery)throw new Error('Please use a jQuery expression string with the "legend.container" option.');o.dataset||(o.dataset=[]),o.options||(o.options={legend:{show:!1}});var a=$(e.children()[0]);a.css({width:c,height:l});var r=function(){var t=$.plot(a,o.dataset,o.options);return o.callback&&o.callback(t),t};a.on("plotclick",function(e,n,i){t(function(){o.onPlotClick({event:e,pos:n,item:i})})}),a.on("plotselected",function(e,n){t(function(){o.onPlotSelected({event:e,ranges:n})})}),a.on("plothover",function(e,n,i){t(function(){o.onPlotHover({event:e,pos:n,item:i})})});var s=function(){i=r()},u=o.$watch("options",s,!0),d=function(t){if(i)return i.setData(t),i.setupGrid(),i.draw();i=r()},f=o.$watch("dataset",d,!0);n.$observe("width",function(t){t&&(c=t,a.css("width",t))}),n.$observe("height",function(t){t&&(l=t,a.css("height",t))}),e.on("$destroy",function(){a.off("plotclick"),a.off("plothover"),a.off("plotselected"),i.shutdown(),f(),u()})}}}]);